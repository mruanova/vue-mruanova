<!DOCTYPE html>
<html>

<head>
    <title>Mauricio Ruanova-Hurtado</title>
    <meta name="description" content="Mauricio Ruanova-Hurtado front-end web developer and software engineer career portfolio">
    <meta name="keywords" content="Mauricio Ruanova-Hurtado,mruanova,mauricio ruanova">
    <meta name="author" content="Mauricio Ruanova-Hurtado">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Sarpanch:900" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <link rel="icon" type="image/png" href="favicon.ico" />
</head>

<body>
    <div class="header">
        <div class="nav">
            <a target="_blank" class="link" title="https://www.linkedin.com/in/mruanova" href="https://www.linkedin.com/in/mruanova">
                <img src="img/linkedin.png" alt="Linkedin" class="button"> Linkedin
            </a>
        </div>
        <div class="nav">
            <a target="_blank" class="link" title="https://github.com/mruanova" href="https://github.com/mruanova">
                <img src="img/github.png" alt="Github" class="button"> Github
            </a>
        </div>
        <div class="nav">
            <a target="_blank" class="link" title="medium.com/@moreissues" href="https://medium.com/@moreissues">
                <img src="img/email.png" alt="medium.com/@moreissues" class="button"> Blog
            </a>
        </div>
        <div class="nav">
            <a target="_self" class="link" title="about" href="#" id="about">
                <img src="img/about.jpg" alt="About" class="button"> About
            </a>
        </div>
    </div>
    <div class="main">
        <div class="box col-sm-12 col-md-6 col-lg-4" style="padding: 0;margin: 0;">
            <div class="flex">
                <div class="flex1">
                </div>
                <div class="flex1" style="position: relative;">
                    <img src="img/mau.jpg" alt="mau">
                    <div class="mau">mau</div>
                    <div class="mauricioruanovahurtado">MAURICIO RUANOVA-HURTADO</div>
                    <div class="skill skill1">ASP.Net Core</div>
                    <div class="skill skill2">C# / VB</div>
                    <div class="skill skill3">React</div>
                    <div class="skill skill4">Node.js</div>
                    <div class="skill skill5">Python</div>
                    <div class="skill skill6">AWS</div>
                    <div class="skill skill7">Angular</div>
                    <div class="job">
                        <p>
                            This website in the front-end uses REACT.js to get all the projects from a Web API and renders the response in an list with
                            markers in Google Maps.
                        </p>
                        <p>
                            In the back-end a AWS Getway API executes a serverless Lambda function in Node.js that retrieves data from DynamoDB.
                        </p>
                        <p>Deployment in AWS S3 and Route 53.</p>
                    </div>
                    <div class="portfolio">Career Portfolio</div>
                </div>
                <div class="flex1">
                </div>
            </div>
        </div>
        <div class="box col-sm-12 col-md-6 col-lg-4" style="padding: 0;margin: 0;">
            <div class="flex">
                <div class="flex1">
                </div>
                <div class="flex1 white">
                    <div class="about">
                        Mauricio Ruanova-Hurtado ©
                        <a target="" class="" title="Scholarship paper" href="https://link.springer.com/chapter/10.1007/11499053_28">
                            papers
                        </a> |
                        <a target="" class="" title="Google books" href="https://books.google.com/books/about/Estandarizaci%C3%B3n_y_mejora_de_procesos_y.html?id=ipI3HQAACAAJ">
                            books
                        </a>
                    </div>
                    <ul id="project_list" ng-cloak>
                        <li v-for="project in projects" onclick="mapGeoCode('{{project.Name}','{{project.Website}}','{{project.Position}}','{{project.Address}}');">
                            <img src='img/1.jpg' alt='project' class='logo'>
                            <div class='company'>{{project.Name}}</div>
                            <div class='position'>{{project.Position}}</div>
                            <div class='address-link'>{{project.Address}}</div>
                            <div class="cb"></div>
                        </li>
                    </ul>
                </div>
                <div class="flex1">
                </div>
            </div>
        </div>
        <div class="box col-sm-12 col-md-12 col-lg-4" style="padding: 0;margin: 0;">
            <div id="map"></div>
        </div>
    </div>
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Mauricio Ruanova-Hurtado front-end web developer, contact me on:
                <a target="_blank" title="https://www.linkedin.com/in/mruanova" href="https://www.linkedin.com/in/mruanova">Linkedin</a>
            </p>
            <p>BS in computer systems engineering
                <a href="http://udem.edu.mx/itc/" target="_blank" title="Universidad de Monterrey">udem.edu.mx</a>
            </p>
            <p>Read my
                <a href="https://medium.com/@moreissues/">Blog</a> at Medium.</p>
            <p>Learn more about the technologies used in this website by visiting the following links:
                <a target="_blank" title="https://github.com/mruanova" href="https://github.com/mruanova/mruanova.com">Github</a>
            </p>
            <p>
                <a target="_blank" href="https://246gg84zg8.execute-api.us-west-2.amazonaws.com/prod/projects" title="Web API">Web API</a> |
                <a target="_blank" href="https://youtu.be/rKQUg8x6WXY" title="Youtube tutorial">Youtube tutorial</a>
            </p>
        </div>
    </div>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyATA9xz6PHfFxFlVLPd4ouYwB3BEQRBgPU&callback=initialize"></script>
    <script>
        // my API in AWS
        var api = "https://246gg84zg8.execute-api.us-west-2.amazonaws.com/prod/projects";
        var modal = document.getElementById('myModal');
        var btn = document.getElementById("about");
        var span = document.getElementsByClassName("close")[0];

        // show modal ABOUT
        btn.onclick = function () {
            modal.style.display = "block";
        };

        // hide modal ABOUT on click X
        span.onclick = function () {
            modal.style.display = "none";
        };

        // hide modal ABOUT on click anywhere outside the modal
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        };

        var geocoder;
        var map;
        var markers = [];

        // initialize google maps
        function initialize() {
            geocoder = new google.maps.Geocoder();
            var latlng = new google.maps.LatLng(41.8838158, -87.6415424);
            var mapOptions = {
                zoom: 14,
                center: latlng
            };
            map = new google.maps.Map(document.getElementById('map'), mapOptions);
        };

        // add a marker in google maps for each project
        function addMarker(index, title, website, address) {
            geocoder.geocode({ 'address': address }, function (results, status) {
                if (status == 'OK') {
                    var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location,
                        title: title
                    });
                    markers.push(marker);
                    var contentString = '<div id="content">' +
                        '<div class="company">' + title + '</div>' +
                        '<div id="bodyContent">' +
                        '<div class="website">' + website + '</div>' +
                        '<div class="address">' + address + '</div>' +
                        '</div>' +
                        '</div>';
                    var infowindow = new google.maps.InfoWindow({
                        content: contentString
                    });
                    if (index === 1) {
                        infowindow.open(map, marker);
                    }
                    marker.addListener('click', function () {
                        infowindow.open(map, marker);
                    });
                }
            });
        };

        // display all projects from API using underscore and backbone
        $(document).ready(function () {

            // create a model for a project using backbone with defaults
            var ProjectModel = Backbone.Model.extend({
                defaults: {
                    ProjectId: null,
                    Name: null,
                    Website: null,
                    Position: null,
                    Address: null
                }
            });

            // create a collection for a project using backbone from API
            var ProjectCollection = Backbone.Collection.extend({
                model: ProjectModel,
                url: api,
                parse: function (response) {
                    return response.Items.sort(function (a, b) {
                        return parseFloat(a.ProjectId) - parseFloat(b.ProjectId);
                    });
                }
            });

            // create a template using underscore
            var template = "<img src='img/<%=ProjectId%>.jpg' alt='<%=ProjectId%>' class='logo'>";
            template += "<div class='company'><%=Name%></div>";
            template += "<div class='position'><%=Position%></div>";
            template += "<div class='address'><%=Address%></div>";
            template += "<div class='cb'></div>";

            // create a view for a project using backbone and a template from uderscore
            var ProjectView = Backbone.View.extend({
                tagName: "div",
                template: _.template(template),
                initialize: function () {
                    this.listenTo(this.collection, "sync", this.render);
                },
                render: function () {
                    // render projects and add markers
                    var m = this.model.toJSON();
                    var t = this.template(m);
                    this.$el.html(t);
                    console.log(this.model.attributes.ProjectId);
                    console.log(this.model.attributes.Name);
                    console.log(this.model.attributes.Website);
                    console.log(this.model.attributes.Position);
                    console.log(this.model.attributes.Address);
                    addMarker(this.model.attributes.ProjectId, this.model.attributes.Name, this.model.attributes.Website, this.model.attributes.Address);
                    return this;
                },
                events: {
                    // on click set center
                    'click': 'mapGeoCode'
                },
                mapGeoCode: function () {
                    var name = $(this)[0].model.attributes.Name;
                    var website = $(this)[0].model.attributes.Website;
                    var position = $(this)[0].model.attributes.Position;
                    var address = $(this)[0].model.attributes.Address;
                    geocoder.geocode({ 'address': address }, function (results, status) {
                        if (status == 'OK') {
                            // set center of the map
                            map.setCenter(results[0].geometry.location);
                            for (var i = 0; i < markers.length; i++) {
                                markers[i].setMap(null);
                            }
                            markers.length = 0;
                            var marker = new google.maps.Marker({
                                map: map,
                                position: results[0].geometry.location,
                                title: name
                            });
                            var contentString = '<div id="content">' +
                                '<div class="link2">' + name + '</div>' +
                                '<div id="bodyContent">' +
                                '<div class="website">' + website + '</div>' +
                                '<div class="address">' + address + '</div>' +
                                '</div>' +
                                '</div>';
                            var infowindow = new google.maps.InfoWindow({
                                content: contentString
                            });
                            marker.addListener('click', function () {
                                infowindow.open(map, marker);
                            });
                            infowindow.open(map, marker);
                        }
                    });
                }
            });

            // create a list view using backbone
            var ProjectListView = Backbone.View.extend({
                el: "#project_list",
                initialize: function () {
                    this.render();
                },
                render: function () {
                    this.$el.empty();
                    this.collection.each(function (project) {
                        var projectView = new ProjectView({ model: project });
                        this.$el.append(projectView.render().$el);
                    }, this);
                }
            });

            // instantiate
            var projectCollection = new ProjectCollection();

            // fetch
            projectCollection.fetch().then(function () {
                var myProjectList = new ProjectListView({ collection: projectCollection });
            });
        });
    </script>
</body>

</html>